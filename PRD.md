# PRD: AlphaFactors - 미국 주식 알파 팩터 분석 및 백테스팅 플랫폼

- **문서 버전**: 1.1
- **작성일**: 2025년 6월 30일
- **작성자**: AlphaFactors 개발팀

---

## 1. 개요 (Overview)

AlphaFactors는 미국 주식 데이터를 기반으로 다양한 팩터(지표)를 생성하고, Qlib과 연동하여 포트폴리오 백테스팅, 리스크 분석, 시각화를 제공하는 플랫폼입니다. Streamlit 기반의 웹 UI로 팩터 연구와 전략 검증을 누구나 쉽게 할 수 있습니다.

---

## 2. 해결하고자 하는 문제 (Problem Statement)

- 기존 팩터 마이닝 및 백테스팅 환경의 진입장벽(복잡한 환경설정, 데이터 준비, 코드 작성 등)이 높음
- 팩터와 전략의 효과를 직관적으로 비교/분석하기 어려움
- 리스크 지표, 누적 수익률 등 핵심 성과지표를 한눈에 보기 어려움

---

## 3. 제안하는 솔루션 (Proposed Solution)

- 미국 주식 실시간 데이터 다운로드 및 관리
- 커스텀/기본 팩터 생성 및 관리
- Qlib 기반 백테스팅 및 리스크 분석 자동화
- 누적 수익률, 리스크 지표, 수익률 분포 등 시각화
- Streamlit 기반 웹 UI 제공

---

## 4. 핵심 기능 요구사항 (Key Features)

### F1: 데이터 준비 및 관리
- F1.1: 사용자는 분석할 주식의 티커, 기간을 입력할 수 있다.
- F1.2: yfinance로 지정한 종목의 OHLCV 데이터를 다운로드한다.
- F1.3: 다운로드한 데이터는 `local_stock_data/`에 저장되어 재사용 가능하다.

### F2: 팩터 생성 및 관리
- F2.1: 기본 팩터(예: RESI5) 또는 커스텀 팩터를 선택/생성할 수 있다.
- F2.2: 커스텀 팩터는 날짜 인덱스가 Qlib 데이터와 일치해야 한다.
- F2.3: 팩터 데이터는 Qlib 요구 MultiIndex(`datetime`, `instrument`)로 변환된다.

### F3: 백테스팅 및 리스크 분석
- F3.1: Qlib Alpha158 데이터와 팩터를 연동하여 백테스팅을 실행한다.
- F3.2: TopkDropoutStrategy 등 Qlib 전략을 적용한다.
- F3.3: 누적 수익률, 일별 수익률, Sharpe, IC 등 리스크 지표를 계산한다.
- F3.4: 여러 팩터(전략) 비교 기능을 제공한다.

### F4: 시각화 및 UI
- F4.1: 누적 수익률 그래프, 리스크 지표 테이블, 일별 수익률 분포 등 다양한 시각화 제공
- F4.2: Streamlit 기반의 직관적인 웹 UI 제공

---

## 5. 기술 스택 (Technology Stack)
- Python 3.7~3.8 (Qlib 호환)
- Streamlit (UI)
- pandas, numpy (데이터 처리)
- yfinance (미국 주식 데이터)
- pyqlib (백테스팅/리스크 분석)
- matplotlib (시각화)
- torch (딥러닝 팩터 확장 가능)

---

## 6. 성공 지표 (Success Metrics)
- Qlib 백테스팅 결과 누적 수익률, Sharpe, IC 등 주요 지표가 UI에 정상적으로 시각화됨
- 커스텀 팩터와 기본 팩터의 전략 비교가 가능함
- 데이터 준비~팩터 생성~백테스팅~시각화까지 전체 흐름이 UI에서 원활하게 동작함

---

## 7. 향후 확장 계획 (Future Scope)
- 멀티팩터, 멀티종목, 고급 딥러닝 팩터 등 확장
- 사용자 정의 전략/팩터 업로드 기능
- 백테스팅 결과 자동 리포트/엑셀 내보내기
- 다양한 리스크 지표 및 시각화 추가

---

## 8. 주니어 개발자 참고
- 각 기능별 목적, 사용법, 예상 결과를 코드와 UI에서 쉽게 확인할 수 있도록 설계
- 에러 발생 시 상세 메시지와 해결 방법을 UI에 안내
- 코드 구조와 데이터 흐름을 주석과 문서로 명확히 설명
